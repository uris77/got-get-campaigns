/*
 AngularJS v1.2.9
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(){var g=this,a=g._,d={},e=Array.prototype,h=Object.prototype,k=e.push,f=e.slice,t=e.concat,q=h.toString,E=h.hasOwnProperty,r=e.forEach,p=e.map,x=e.reduce,z=e.reduceRight,A=e.filter,v=e.every,u=e.some,w=e.indexOf,B=e.lastIndexOf,h=Array.isArray,C=Object.keys,y=Function.prototype.bind,b=function(c){if(c instanceof b)return c;if(!(this instanceof b))return new b(c);this._wrapped=c};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=b),exports._=
b):g._=b;b.VERSION="1.5.2";var s=b.each=b.forEach=function(c,m,l){if(null!=c)if(r&&c.forEach===r)c.forEach(m,l);else if(c.length===+c.length)for(var a=0,e=c.length;a<e&&m.call(l,c[a],a,c)!==d;a++);else for(var f=b.keys(c),a=0,e=f.length;a<e&&m.call(l,c[f[a]],f[a],c)!==d;a++);};b.map=b.collect=function(c,m,b){var a=[];if(null==c)return a;if(p&&c.map===p)return c.map(m,b);s(c,function(c,d,e){a.push(m.call(b,c,d,e))});return a};b.reduce=b.foldl=b.inject=function(c,m,a,n){var d=2<arguments.length;null==
c&&(c=[]);if(x&&c.reduce===x)return n&&(m=b.bind(m,n)),d?c.reduce(m,a):c.reduce(m);s(c,function(c,b,e){d?a=m.call(n,a,c,b,e):(a=c,d=!0)});if(!d)throw new TypeError("Reduce of empty array with no initial value");return a};b.reduceRight=b.foldr=function(c,m,a,n){var d=2<arguments.length;null==c&&(c=[]);if(z&&c.reduceRight===z)return n&&(m=b.bind(m,n)),d?c.reduceRight(m,a):c.reduceRight(m);var e=c.length;if(e!==+e)var f=b.keys(c),e=f.length;s(c,function(b,k,g){k=f?f[--e]:--e;d?a=m.call(n,a,c[k],k,g):
(a=c[k],d=!0)});if(!d)throw new TypeError("Reduce of empty array with no initial value");return a};b.find=b.detect=function(c,b,a){var n;K(c,function(c,d,e){if(b.call(a,c,d,e))return n=c,!0});return n};b.filter=b.select=function(c,b,a){var n=[];if(null==c)return n;if(A&&c.filter===A)return c.filter(b,a);s(c,function(c,d,e){b.call(a,c,d,e)&&n.push(c)});return n};b.reject=function(c,m,a){return b.filter(c,function(c,b,d){return!m.call(a,c,b,d)},a)};b.every=b.all=function(c,m,a){m||(m=b.identity);var n=
!0;if(null==c)return n;if(v&&c.every===v)return c.every(m,a);s(c,function(c,b,e){if(!(n=n&&m.call(a,c,b,e)))return d});return!!n};var K=b.some=b.any=function(c,m,a){m||(m=b.identity);var n=!1;if(null==c)return n;if(u&&c.some===u)return c.some(m,a);s(c,function(c,b,e){if(n||(n=m.call(a,c,b,e)))return d});return!!n};b.contains=b.include=function(c,b){return null==c?!1:w&&c.indexOf===w?-1!=c.indexOf(b):K(c,function(c){return c===b})};b.invoke=function(c,m){var a=f.call(arguments,2),d=b.isFunction(m);
return b.map(c,function(c){return(d?m:c[m]).apply(c,a)})};b.pluck=function(c,a){return b.map(c,function(c){return c[a]})};b.where=function(c,a,l){return b.isEmpty(a)?l?void 0:[]:b[l?"find":"filter"](c,function(c){for(var b in a)if(a[b]!==c[b])return!1;return!0})};b.findWhere=function(c,a){return b.where(c,a,!0)};b.max=function(c,a,l){if(!a&&b.isArray(c)&&c[0]===+c[0]&&65535>c.length)return Math.max.apply(Math,c);if(!a&&b.isEmpty(c))return-Infinity;var d={computed:-Infinity,value:-Infinity};s(c,function(c,
b,e){b=a?a.call(l,c,b,e):c;b>d.computed&&(d={value:c,computed:b})});return d.value};b.min=function(c,a,l){if(!a&&b.isArray(c)&&c[0]===+c[0]&&65535>c.length)return Math.min.apply(Math,c);if(!a&&b.isEmpty(c))return Infinity;var d={computed:Infinity,value:Infinity};s(c,function(c,b,e){b=a?a.call(l,c,b,e):c;b<d.computed&&(d={value:c,computed:b})});return d.value};b.shuffle=function(c){var a,l=0,d=[];s(c,function(c){a=b.random(l++);d[l-1]=d[a];d[a]=c});return d};b.sample=function(c,a,l){return 2>arguments.length||
l?c[b.random(c.length-1)]:b.shuffle(c).slice(0,Math.max(0,a))};var F=function(c){return b.isFunction(c)?c:function(b){return b[c]}};b.sortBy=function(c,a,l){var d=F(a);return b.pluck(b.map(c,function(c,b,a){return{value:c,index:b,criteria:d.call(l,c,b,a)}}).sort(function(c,b){var a=c.criteria,m=b.criteria;if(a!==m){if(a>m||void 0===a)return 1;if(a<m||void 0===m)return-1}return c.index-b.index}),"value")};var G=function(c){return function(a,l,d){var e={},f=null==l?b.identity:F(l);s(a,function(b,l){var k=
f.call(d,b,l,a);c(e,k,b)});return e}};b.groupBy=G(function(c,a,l){(b.has(c,a)?c[a]:c[a]=[]).push(l)});b.indexBy=G(function(c,b,a){c[b]=a});b.countBy=G(function(c,a){b.has(c,a)?c[a]++:c[a]=1});b.sortedIndex=function(c,a,l,d){l=null==l?b.identity:F(l);a=l.call(d,a);for(var e=0,f=c.length;e<f;){var k=e+f>>>1;l.call(d,c[k])<a?e=k+1:f=k}return e};b.toArray=function(c){return c?b.isArray(c)?f.call(c):c.length===+c.length?b.map(c,b.identity):b.values(c):[]};b.size=function(c){return null==c?0:c.length===
+c.length?c.length:b.keys(c).length};b.first=b.head=b.take=function(c,a,b){return null==c?void 0:null==a||b?c[0]:f.call(c,0,a)};b.initial=function(c,a,b){return f.call(c,0,c.length-(null==a||b?1:a))};b.last=function(c,a,b){return null==c?void 0:null==a||b?c[c.length-1]:f.call(c,Math.max(c.length-a,0))};b.rest=b.tail=b.drop=function(c,a,b){return f.call(c,null==a||b?1:a)};b.compact=function(c){return b.filter(c,b.identity)};var L=function(c,a,l){if(a&&b.every(c,b.isArray))return t.apply(l,c);s(c,function(c){b.isArray(c)||
b.isArguments(c)?a?k.apply(l,c):L(c,a,l):l.push(c)});return l};b.flatten=function(c,a){return L(c,a,[])};b.without=function(c){return b.difference(c,f.call(arguments,1))};b.uniq=b.unique=function(c,a,l,d){b.isFunction(a)&&(d=l,l=a,a=!1);l=l?b.map(c,l,d):c;var e=[],f=[];s(l,function(l,d){(a?d&&f[f.length-1]===l:b.contains(f,l))||(f.push(l),e.push(c[d]))});return e};b.union=function(){return b.uniq(b.flatten(arguments,!0))};b.intersection=function(c){var a=f.call(arguments,1);return b.filter(b.uniq(c),
function(c){return b.every(a,function(a){return 0<=b.indexOf(a,c)})})};b.difference=function(c){var a=t.apply(e,f.call(arguments,1));return b.filter(c,function(c){return!b.contains(a,c)})};b.zip=function(){for(var c=b.max(b.pluck(arguments,"length").concat(0)),a=Array(c),l=0;l<c;l++)a[l]=b.pluck(arguments,""+l);return a};b.object=function(c,a){if(null==c)return{};for(var b={},d=0,e=c.length;d<e;d++)a?b[c[d]]=a[d]:b[c[d][0]]=c[d][1];return b};b.indexOf=function(c,a,d){if(null==c)return-1;var e=0,f=
c.length;if(d)if("number"==typeof d)e=0>d?Math.max(0,f+d):d;else return e=b.sortedIndex(c,a),c[e]===a?e:-1;if(w&&c.indexOf===w)return c.indexOf(a,d);for(;e<f;e++)if(c[e]===a)return e;return-1};b.lastIndexOf=function(c,a,b){if(null==c)return-1;var d=null!=b;if(B&&c.lastIndexOf===B)return d?c.lastIndexOf(a,b):c.lastIndexOf(a);for(b=d?b:c.length;b--;)if(c[b]===a)return b;return-1};b.range=function(c,a,b){1>=arguments.length&&(a=c||0,c=0);b=arguments[2]||1;for(var d=Math.max(Math.ceil((a-c)/b),0),e=0,
f=Array(d);e<d;)f[e++]=c,c+=b;return f};var H=function(){};b.bind=function(c,a){var d,e;if(y&&c.bind===y)return y.apply(c,f.call(arguments,1));if(!b.isFunction(c))throw new TypeError;d=f.call(arguments,2);return e=function(){if(!(this instanceof e))return c.apply(a,d.concat(f.call(arguments)));H.prototype=c.prototype;var b=new H;H.prototype=null;var k=c.apply(b,d.concat(f.call(arguments)));return Object(k)===k?k:b}};b.partial=function(c){var a=f.call(arguments,1);return function(){return c.apply(this,
a.concat(f.call(arguments)))}};b.bindAll=function(c){var a=f.call(arguments,1);if(0===a.length)throw Error("bindAll must be passed function names");s(a,function(a){c[a]=b.bind(c[a],c)});return c};b.memoize=function(c,a){var d={};a||(a=b.identity);return function(){var e=a.apply(this,arguments);return b.has(d,e)?d[e]:d[e]=c.apply(this,arguments)}};b.delay=function(c,a){var b=f.call(arguments,2);return setTimeout(function(){return c.apply(null,b)},a)};b.defer=function(c){return b.delay.apply(b,[c,1].concat(f.call(arguments,
1)))};b.throttle=function(c,a,b){var d,e,f,k=null,g=0;b||(b={});var t=function(){g=!1===b.leading?0:new Date;k=null;f=c.apply(d,e)};return function(){var q=new Date;g||!1!==b.leading||(g=q);var h=a-(q-g);d=this;e=arguments;0>=h?(clearTimeout(k),k=null,g=q,f=c.apply(d,e)):k||!1===b.trailing||(k=setTimeout(t,h));return f}};b.debounce=function(c,a,b){var d,e,f,k,g;return function(){f=this;e=arguments;k=new Date;var q=function(){var h=new Date-k;h<a?d=setTimeout(q,a-h):(d=null,b||(g=c.apply(f,e)))},h=
b&&!d;d||(d=setTimeout(q,a));h&&(g=c.apply(f,e));return g}};b.once=function(c){var a=!1,b;return function(){if(a)return b;a=!0;b=c.apply(this,arguments);c=null;return b}};b.wrap=function(c,a){return function(){var b=[c];k.apply(b,arguments);return a.apply(this,b)}};b.compose=function(){var c=arguments;return function(){for(var a=arguments,b=c.length-1;0<=b;b--)a=[c[b].apply(this,a)];return a[0]}};b.after=function(c,a){return function(){if(1>--c)return a.apply(this,arguments)}};b.keys=C||function(c){if(c!==
Object(c))throw new TypeError("Invalid object");var a=[],d;for(d in c)b.has(c,d)&&a.push(d);return a};b.values=function(c){for(var a=b.keys(c),d=a.length,e=Array(d),f=0;f<d;f++)e[f]=c[a[f]];return e};b.pairs=function(c){for(var a=b.keys(c),d=a.length,e=Array(d),f=0;f<d;f++)e[f]=[a[f],c[a[f]]];return e};b.invert=function(c){for(var a={},d=b.keys(c),e=0,f=d.length;e<f;e++)a[c[d[e]]]=d[e];return a};b.functions=b.methods=function(c){var a=[],d;for(d in c)b.isFunction(c[d])&&a.push(d);return a.sort()};
b.extend=function(c){s(f.call(arguments,1),function(a){if(a)for(var b in a)c[b]=a[b]});return c};b.pick=function(c){var a={},b=t.apply(e,f.call(arguments,1));s(b,function(b){b in c&&(a[b]=c[b])});return a};b.omit=function(c){var a={},d=t.apply(e,f.call(arguments,1)),k;for(k in c)b.contains(d,k)||(a[k]=c[k]);return a};b.defaults=function(c){s(f.call(arguments,1),function(a){if(a)for(var b in a)void 0===c[b]&&(c[b]=a[b])});return c};b.clone=function(c){return b.isObject(c)?b.isArray(c)?c.slice():b.extend({},
c):c};b.tap=function(c,a){a(c);return c};var I=function(c,a,d,e){if(c===a)return 0!==c||1/c==1/a;if(null==c||null==a)return c===a;c instanceof b&&(c=c._wrapped);a instanceof b&&(a=a._wrapped);var f=q.call(c);if(f!=q.call(a))return!1;switch(f){case "[object String]":return c==String(a);case "[object Number]":return c!=+c?a!=+a:0==c?1/c==1/a:c==+a;case "[object Date]":case "[object Boolean]":return+c==+a;case "[object RegExp]":return c.source==a.source&&c.global==a.global&&c.multiline==a.multiline&&
c.ignoreCase==a.ignoreCase}if("object"!=typeof c||"object"!=typeof a)return!1;for(var k=d.length;k--;)if(d[k]==c)return e[k]==a;var k=c.constructor,g=a.constructor;if(k!==g&&!(b.isFunction(k)&&k instanceof k&&b.isFunction(g)&&g instanceof g))return!1;d.push(c);e.push(a);k=0;g=!0;if("[object Array]"==f){if(k=c.length,g=k==a.length)for(;k--&&(g=I(c[k],a[k],d,e)););}else{for(var h in c)if(b.has(c,h)&&(k++,!(g=b.has(a,h)&&I(c[h],a[h],d,e))))break;if(g){for(h in a)if(b.has(a,h)&&!k--)break;g=!k}}d.pop();
e.pop();return g};b.isEqual=function(a,b){return I(a,b,[],[])};b.isEmpty=function(a){if(null==a)return!0;if(b.isArray(a)||b.isString(a))return 0===a.length;for(var d in a)if(b.has(a,d))return!1;return!0};b.isElement=function(a){return!(!a||1!==a.nodeType)};b.isArray=h||function(a){return"[object Array]"==q.call(a)};b.isObject=function(a){return a===Object(a)};s("Arguments Function String Number Date RegExp".split(" "),function(a){b["is"+a]=function(b){return q.call(b)=="[object "+a+"]"}});b.isArguments(arguments)||
(b.isArguments=function(a){return!(!a||!b.has(a,"callee"))});"function"!==typeof/./&&(b.isFunction=function(a){return"function"===typeof a});b.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};b.isNaN=function(a){return b.isNumber(a)&&a!=+a};b.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==q.call(a)};b.isNull=function(a){return null===a};b.isUndefined=function(a){return void 0===a};b.has=function(a,b){return E.call(a,b)};b.noConflict=function(){g._=a;return this};b.identity=
function(a){return a};b.times=function(a,b,d){for(var e=Array(Math.max(0,a)),f=0;f<a;f++)e[f]=b.call(d,f);return e};b.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))};var D={escape:{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}};D.unescape=b.invert(D.escape);var M={escape:RegExp("["+b.keys(D.escape).join("")+"]","g"),unescape:RegExp("("+b.keys(D.unescape).join("|")+")","g")};b.each(["escape","unescape"],function(a){b[a]=function(b){return null==
b?"":(""+b).replace(M[a],function(b){return D[a][b]})}});b.result=function(a,d){if(null!=a){var e=a[d];return b.isFunction(e)?e.call(a):e}};b.mixin=function(a){s(b.functions(a),function(d){var e=b[d]=a[d];b.prototype[d]=function(){var a=[this._wrapped];k.apply(a,arguments);a=e.apply(b,a);return this._chain?b(a).chain():a}})};var N=0;b.uniqueId=function(a){var b=++N+"";return a?a+b:b};b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,
O={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\t|\u2028|\u2029/g;b.template=function(a,d,e){var f;e=b.defaults({},e,b.templateSettings);var k=RegExp([(e.escape||J).source,(e.interpolate||J).source,(e.evaluate||J).source].join("|")+"|$","g"),g=0,h="__p+\x3d'";a.replace(k,function(b,d,e,f,k){h+=a.slice(g,k).replace(P,function(a){return"\\"+O[a]});d&&(h+="'+\n((__t\x3d("+d+"))\x3d\x3dnull?'':_.escape(__t))+\n'");e&&(h+="'+\n((__t\x3d("+e+"))\x3d\x3dnull?'':__t)+\n'");
f&&(h+="';\n"+f+"\n__p+\x3d'");g=k+b.length;return b});h+="';\n";e.variable||(h="with(obj||{}){\n"+h+"}\n");h="var __t,__p\x3d'',__j\x3dArray.prototype.join,print\x3dfunction(){__p+\x3d__j.call(arguments,'');};\n"+h+"return __p;\n";try{f=new Function(e.variable||"obj","_",h)}catch(q){throw q.source=h,q;}if(d)return f(d,b);d=function(a){return f.call(this,a,b)};d.source="function("+(e.variable||"obj")+"){\n"+h+"}";return d};b.chain=function(a){return b(a).chain()};b.mixin(b);s("pop push reverse shift sort splice unshift".split(" "),
function(a){var d=e[a];b.prototype[a]=function(){var e=this._wrapped;d.apply(e,arguments);"shift"!=a&&"splice"!=a||0!==e.length||delete e[0];return this._chain?b(e).chain():e}});s(["concat","join","slice"],function(a){var d=e[a];b.prototype[a]=function(){var a=d.apply(this._wrapped,arguments);return this._chain?b(a).chain():a}});b.extend(b.prototype,{chain:function(){this._chain=!0;return this},value:function(){return this._wrapped}})}).call(this);
(function(g,a,d){function e(d,e,h){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(g,E,r,p,x){function z(){v&&(v.$destroy(),v=null);u&&(h.leave(u),u=null)}function A(){var r=d.current&&d.current.locals;if(a.isDefined(r&&r.$template)){var r=g.$new(),p=d.current;u=x(r,function(b){h.enter(b,null,u||E,function(){!a.isDefined(w)||w&&!g.$eval(w)||e()});z()});v=p.scope=r;v.$emit("$viewContentLoaded");v.$eval(B)}else z()}var v,u,w=r.autoscroll,B=r.onload||"";g.$on("$routeChangeSuccess",
A);A()}}}function h(a,d,e){return{restrict:"ECA",priority:-400,link:function(h,g){var r=e.current,p=r.locals;g.html(p.$template);var x=a(g.contents());r.controller&&(p.$scope=h,p=d(r.controller,p),r.controllerAs&&(h[r.controllerAs]=p),g.data("$ngControllerController",p),g.children().data("$ngControllerController",p));x(h)}}}g=a.module("ngRoute",["ng"]).provider("$route",function(){function d(e,f){return a.extend(new (a.extend(function(){},{prototype:e})),f)}function e(a,d){var f=d.caseInsensitiveMatch,
h={originalPath:a,regexp:a},k=h.keys=[];a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?|\*])?/g,function(a,d,e,f){a="?"===f?f:null;f="*"===f?f:null;k.push({name:e,optional:!!a});d=d||"";return""+(a?"":d)+"(?:"+(a?d:"")+(f&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$\*])/g,"\\$1");h.regexp=RegExp("^"+a+"$",f?"i":"");return h}var h={};this.when=function(d,k){h[d]=a.extend({reloadOnSearch:!0},k,d&&e(d,k));if(d){var g="/"==d[d.length-1]?d.substr(0,d.length-1):d+"/";h[g]=a.extend({redirectTo:d},
e(g,k))}return this};this.otherwise=function(a){this.when(null,a);return this};this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache","$sce",function(e,f,g,p,x,z,A,v){function u(){var b=w(),d=y.current;if(b&&d&&b.$$route===d.$$route&&a.equals(b.pathParams,d.pathParams)&&!b.reloadOnSearch&&!C)d.params=b.params,a.copy(d.params,g),e.$broadcast("$routeUpdate",d);else if(b||d)C=!1,e.$broadcast("$routeChangeStart",b,d),(y.current=b)&&b.redirectTo&&(a.isString(b.redirectTo)?
f.path(B(b.redirectTo,b.params)).search(b.params).replace():f.url(b.redirectTo(b.pathParams,f.path(),f.search())).replace()),p.when(b).then(function(){if(b){var d=a.extend({},b.resolve),e,f;a.forEach(d,function(b,e){d[e]=a.isString(b)?x.get(b):x.invoke(b)});a.isDefined(e=b.template)?a.isFunction(e)&&(e=e(b.params)):a.isDefined(f=b.templateUrl)&&(a.isFunction(f)&&(f=f(b.params)),f=v.getTrustedResourceUrl(f),a.isDefined(f)&&(b.loadedTemplateUrl=f,e=z.get(f,{cache:A}).then(function(a){return a.data})));
a.isDefined(e)&&(d.$template=e);return p.all(d)}}).then(function(f){b==y.current&&(b&&(b.locals=f,a.copy(b.params,g)),e.$broadcast("$routeChangeSuccess",b,d))},function(a){b==y.current&&e.$broadcast("$routeChangeError",b,d,a)})}function w(){var b,e;a.forEach(h,function(h,g){var t;if(t=!e){var q=f.path();t=h.keys;var r={};if(h.regexp)if(q=h.regexp.exec(q)){for(var p=1,v=q.length;p<v;++p){var u=t[p-1],w="string"==typeof q[p]?decodeURIComponent(q[p]):q[p];u&&w&&(r[u.name]=w)}t=r}else t=null;else t=null;
t=b=t}t&&(e=d(h,{params:a.extend({},f.search(),b),pathParams:b}),e.$$route=h)});return e||h[null]&&d(h[null],{params:{},pathParams:{}})}function B(b,d){var e=[];a.forEach((b||"").split(":"),function(a,b){if(0===b)e.push(a);else{var f=a.match(/(\w+)(.*)/),h=f[1];e.push(d[h]);e.push(f[2]||"");delete d[h]}});return e.join("")}var C=!1,y={routes:h,reload:function(){C=!0;e.$evalAsync(u)}};e.$on("$locationChangeSuccess",u);return y}]});g.provider("$routeParams",function(){this.$get=function(){return{}}});
g.directive("ngView",e);g.directive("ngView",h);e.$inject=["$route","$anchorScroll","$animate"];h.$inject=["$compile","$controller","$route"]})(window,window.angular);(function(g){g.module("url_utils",[]).factory("urlUtils",["$window","$location",function(a,d){return{redirectHome:function(){a.location.href="http://"+d.host()+":"+d.port()}}}])})(angular);utils={isNumber:function(g){var a=parseInt(g.trim());return!_.isUndefined(g)&&!_.isEmpty(g.trim())&&(0<a||0>a)&&_.isNumber(a)}};
(function(g){var a={create:"/api/surveys",list:"/api/surveys",getById:function(a){return"/api/surveys/"+a}};g.module("surveys.list",[]).config(["$stateProvider",function(a){a.state("surveys",{url:"surveys",templateUrl:"/surveys/index.html"}).state("surveys.list",{url:"/list",templateUrl:"/surveys/list.html",controller:"SurveysListController"}).state("surveys.show",{url:"/:id",templateUrl:"/surveys/show.html",controller:"SurveyShowController"})}]).factory("SurveyRepositoryService",["$http",function(d){return{list:function(){return d.get(a.list)},
fetch:function(e){return d.get(a.getById(e))}}}]).controller("SurveysListController",["$scope","urlUtils","SurveyRepositoryService",function(a,e,h){console.log("List Controller");h.list().success(function(e){a.surveys=e}).error(function(a,d,h){401==d&&e.redirectHome();console.error("ERROR: ",a)})}]).controller("SurveyShowController",["$scope","$stateParams","urlUtils","SurveyRepositoryService",function(a,e,h,k){k.fetch(e.id).success(function(e){a.survey=e.survey;a.locations=e.locations}).error(function(a,
d,e){console.error("ERROR: ",a);401==d&&h.redirectHome()})}])})(angular);
(function(g){var a={apiUrls:{create:"/api/surveys",list:"/api/surveys",getById:function(a){return"/api/surveys/"+a}},isYear:function(a){return utils.isNumber(a)&&2010<parseInt(a)&&2030>parseInt(a)},validateSurveyForm:function(d,e){var h=[];a.isYear(e)||h.push("Year: Provide a valid year! (E.g. 2014)");_.isUndefined(d)&&h.push("Month: Select a month.");return h}};g.module("surveys.create",[]).config(["$stateProvider",function(a){a.state("surveysCreate",{url:"/surveys/create",templateUrl:"/surveys/create.html",
controller:"SurveysCreateController"})}]).factory("CreateSurveyService",["$http",function(d){return{create:function(e){return d.post(a.apiUrls.create,e)}}}]).controller("SurveysCreateController",["$scope","$state","urlUtils","CreateSurveyService",function(d,e,h,k){d.months=[{name:"January"},{name:"February"},{name:"March"},{name:"April"},{name:"May"},{name:"June"},{name:"July"},{name:"August"},{name:"September"},{name:"October"},{name:"November"},{name:"December"}];d.submit=function(){var f=a.validateSurveyForm(d.month,
d.year);0<f.length?d.errors=f:k.create({month:d.month.name,year:d.year}).success(function(){e.transitionTo("surveys.list")}).error(function(a,e){d.errors=a.errors;401==e&&h.redirectHome()})}}])})(angular);(function(g){angular.module("surveys",["surveys.list","surveys.create"])})(angular);
(function(g){function a(a){var e=[];(_.isUndefined(a.name)||_.isEmpty(a.name.trim()))&&e.push("Name: provide a name for the location.");_.isUndefined(a.district)&&e.push("District: select a district.");_.isUndefined(a.locationType)&&e.push("Type of location: select what type of outlet this location is.");_.isUndefined(a.loc)?(e.push("Latitude: specify the latitude."),e.push("Longitude: specify the longitude.")):(!_.isUndefined(a.loc.lon)&&utils.isNumber(a.loc.lon)||e.push("Longitude: specify a valid longitude"),
!_.isUndefined(a.loc.lat)&&utils.isNumber(a.loc.lat)||e.push("Latitude: specify a valid latitude."));return e}g.module("location.create",[]).factory("LocationCreateService",["$http",function(a){return{create:function(e){return a.post("/api/locations",e)}}}]).controller("LocationCreateController",["$scope","$state","urlUtils","LocationCreateService",function(d,e,h,k){d.districts=[{name:"Corozal"},{name:"Orange Walk"},{name:"Belize"},{name:"Cayo"},{name:"Stann Creek"},{name:"Toledo"}];d.locationTypes=
[{name:"Traditional"},{name:"Non-Traditional"},{name:"Hotspot"}];d.submit=function(){var f={name:d.name,district:d.district?d.district.name:void 0,locationType:d.locationType?d.locationType.name:void 0,loc:{lon:d.longitude,lat:d.latitude}},g=a(f);0<g.length?d.errors=g:k.create(f).success(function(){e.transitionTo("locations.list")}).error(function(a,e){d.errors=a.errors;401==e&&h.redirectHome()})}}])})(angular);
(function(g){g.module("locations.list",[]).factory("LocationListService",["$http",function(a){return{list:function(){return a.get("/api/locations")},search:function(d){return a.get("/api/locations/search?locationName\x3d"+d)}}}]).controller("LocationListController",["$scope","urlUtils","LocationListService",function(a,d,e){e.list().success(function(d){a.locations=d}).error(function(a,e){console.error("ERROR: ",a);401==e&&d.redirectHome()});a.search=function(h){e.search(h).success(function(d){a.locations=
d}).error(function(a,e){console.error("Error executing search: ",a);401==e&&d.redirectHome()})}}])})(angular);
(function(g){g.module("locations.details",[]).factory("LocationSurveysGateway",["$http",function(a){return{fetchDetails:function(d){return a.get("/api/locations/"+d)}}}]).controller("LocationDetailsController",["$scope","$stateParams","urlUtils","LocationSurveysGateway",function(a,d,e,h){a.summary=!0;a.locationId=d.locationId;console.log("Started details controller");h.fetchDetails(a.locationId).success(function(d){a.surveys=d.surveys;a.location=d.location}).error(function(a,d){401==d?e.redirectHome():
(alert("An error occurred fetching the data from the server!"),console.error("ERROR fetching data: ",a))});a.showMore=function(d){a.summary=!1;a.survey=d};a.showLess=function(){a.summary=!0}}])})(angular);
(function(g){g.module("PasmoLocation",["location.create","locations.list","locations.details"]).config(["$stateProvider",function(a){a.state("locations",{url:"locations",templateUrl:"/locations/index.html"}).state("locations.list",{url:"/list",templateUrl:"/locations/list.html",controller:"LocationListController"}).state("locations.create",{url:"/create",templateUrl:"/locations/create.html",controller:"LocationCreateController"}).state("locations.summary",{url:"/:locationId/summary",templateUrl:"/locations/surveys_summary.html",
controller:"LocationDetailsController"})}])})(angular);
(function(g){g.module("NonTraditionalOutletSurvey.gatewayService",[]).factory("NonTraditionalSurveyGatewayService",["$http",function(a){return{fetchOutlets:function(){return a.get("/api/locations/byType/non_traditional")},fetchSurveys:function(d){return a.get("/api/surveys/"+d+"/non_traditional_outlets")},createSurvey:function(d,e){return a.post("/api/surveys/"+d+"/non_traditional_outlets",e)},fetchSurvey:function(d,e){return a.get("/api/surveys/"+d+"/non_traditional_outlets/"+e)},editSurvey:function(d,
e,h){return a.put("/api/surveys/"+d+"/non_traditional_outlets/"+e,h)}}}])})(angular);(function(g){g.module("NonTraditionalOutletSurvey.list",[]).controller("NonTraditionalOutletSurveyListController",["$scope","$state","$stateParams","urlUtils","NonTraditionalSurveyGatewayService",function(a,d,e,h,g){a.surveyId=e.id;g.fetchSurveys(e.id).success(function(d){a.surveys=d}).error(function(a,d){console.error("Error retrieving surveys: ",a);401==d&&h.redirectHome()})}])})(angular);
(function(g){g.module("NonTraditionalOutletSurvey.create",[]).controller("NonTraditionalOutletSurveyCreateController",["$scope","$state","$stateParams","urlUtils","NonTraditionalSurveyGatewayService",function(a,d,e,h,g){a.outlet_types=[{name:"Restaurant"},{name:"Pharmacy"}];g.fetchOutlets().success(function(d){a.locations=d;0==a.locations.length&&(a.noLocatons=!0)}).error(function(a,d){console.error("Error retreiving outlets: ",a);401==d&&h.redirectHome()});a.cancel=function(){d.transitionTo("listNonTraditionalOutlets",
{id:e.id})};a.submit=function(){a.errors=[];a.location||(a.errors=["Please chose a location!"]);a.outlet_type||a.errors.push("Please select an outlet type!");if(0==a.errors.length){var f={outreach:a.outreach,outletType:a.outlet_type,targetPopulations:a.target_populations,condomsAvailable:_.isBoolean(a.condoms_available)?a.condoms_available:!1,lubesAvailable:_.isBoolean(a.lube_available)?a.lube_available:!1,gigi:_.isBoolean(a.gigi)?a.gigi:!1,location:{id:a.location.id,name:a.location.name,district:a.location.district,
loc:a.location.loc}};g.createSurvey(e.id,f).success(function(a){d.transitionTo("listNonTraditionalOutlets",{id:e.id})}).error(function(a,d){401==d?h.redirectHome():(console.error("ERROR: ",a),alert("An error occurred!"))})}}}])})(angular);
(function(g){g.module("NonTraditionalOutletSurvey.edit",[]).controller("NonTraditionalOutletSurveyEditController",["$scope","$state","$stateParams","urlUtils","NonTraditionalSurveyGatewayService",function(a,d,e,h,g){a.survey_id=e.survey_id;a.outlet_survey_id=e.outlet_survey_id;g.fetchSurvey(a.survey_id,a.outlet_survey_id).success(function(d){a.survey=d;a.survey.outletType=JSON.parse(d.outletType).name}).error(function(a){console.error("Error fetching survey data: ",a);401==status&&h.redirectHome()});
a.cancel=function(){d.transitionTo("listNonTraditionalOutlets",{id:a.survey_id})};a.submit=function(){var d={outreach:a.survey.outreach,targetPopulations:a.survey.targetPopulations,condomsAvailable:_.isBoolean(a.survey.condomsAvailable)?a.survey.condomsAvailable:!1,lubesAvailable:_.isBoolean(a.survey.lubesAvailable)?a.survey.lubesAvailable:!1,gigi:_.isBoolean(a.survey.gigi)?a.survey.gigi:!1};g.editSurvey(a.survey_id,a.outlet_survey_id,d).success(function(d){a.cancel()}).error(function(a,d){401==d?
h.redirectHome():(console.error("ERROR: ",a),alert("An error occurred!"))})}}])})(angular);
(function(){angular.module("NonTraditionalOutletSurvey",["NonTraditionalOutletSurvey.gatewayService","NonTraditionalOutletSurvey.list","NonTraditionalOutletSurvey.create","NonTraditionalOutletSurvey.edit"]).config(["$stateProvider",function(g){g.state("listNonTraditionalOutlets",{url:"/surveys/:id/non_traditional_outlet/list",templateUrl:"/surveys/non_traditional_outlets/list.html",controller:"NonTraditionalOutletSurveyListController"}).state("createNonTraditionalOutlets",{url:"/surveys/:id/non_traditional_outlet/create",
templateUrl:"/surveys/non_traditional_outlets/create_form.html",controller:"NonTraditionalOutletSurveyCreateController"}).state("editNonTraditionalOutlets",{url:"/surveys/:survey_id/non_traditional_outlet/:outlet_survey_id/edit",templateUrl:"/surveys/non_traditional_outlets/edit.html",controller:"NonTraditionalOutletSurveyEditController"})}])})(angular);
(function(g){g.module("Hotspots.gateway",[]).factory("GatewayService",["$http",function(a){return{fetchOutlets:function(){return a.get("/api/locations/byType/hotspot")},fetchSurveys:function(d){return a.get("/api/surveys/"+d+"/hotspots")},createSurvey:function(d,e){return a.post("/api/surveys/"+d+"/hotspots",e)},fetchHotspotSurvey:function(d,e){return a.get("/api/surveys/"+d+"/hotspots/"+e)},editHotspotSurvey:function(d,e,h){return a.put("/api/surveys/"+d+"/hotspots/"+e,h)}}}])})(angular);
(function(g){g.module("Hotspots.list",[]).controller("ListController",["$scope","$state","$stateParams","urlUtils","GatewayService",function(a,d,e,h,g){a.surveyId=e.id;g.fetchSurveys(e.id).success(function(d){a.surveys=d}).error(function(a,d){console.error("Error retrieving surveys: ",a);401==d&&h.redirectHome()})}])})(angular);
(function(g){g.module("Hotspots.create",[]).controller("CreateController",["$scope","$state","$stateParams","urlUtils","GatewayService",function(a,d,e,g,k){k.fetchOutlets().success(function(d){a.locations=d;0==a.locations.length&&(a.noLocatons=!0)}).error(function(a,d){console.error("Error retreiving outlets: ",a);401==d&&g.redirectHome()});a.cancel=function(){d.transitionTo("hotspotsList",{id:e.id})};a.submit=function(){a.errors=[];a.location||(a.errors=["Please chose a location!"]);if(0==a.errors.length){var f=
{outreach:a.outreach,targetPopulations:a.target_populations,condomsAvailable:_.isBoolean(a.condoms_available)?a.condoms_available:!1,lubesAvailable:_.isBoolean(a.lube_available)?a.lube_available:!1,gigi:_.isBoolean(a.gigi)?a.gigi:!1,location:{id:a.location.id,name:a.location.name,district:a.location.district,loc:a.location.loc}};k.createSurvey(e.id,f).success(function(a){d.transitionTo("hotspotsList",{id:e.id})}).error(function(a,d){401==d?g.redirectHome():(console.error("ERROR: ",a),alert("An error occurred!"))})}}}])})(angular);
(function(g){g.module("Hotspots.edit",[]).controller("HotspotSurveyEditController",["$scope","$state","$stateParams","urlUtils","GatewayService",function(a,d,e,g,k){a.surveyId=e.survey_id;a.hotspotSurveyId=e.hotspot_survey_id;k.fetchHotspotSurvey(a.surveyId,a.hotspotSurveyId).success(function(d){a.survey=d}).error(function(a,d){console.error("Error fetching hotspot survey: ",a);401==d&&g.redirectHome()});a.cancel=function(){d.transitionTo("hotspotsList",{id:a.surveyId})};a.submit=function(){var d=
{outreach:a.survey.outreach,targetPopulations:a.survey.targetPopulations,condomsAvailable:_.isBoolean(a.survey.condomsAvailable)?a.survey.condomsAvailable:!1,lubesAvailable:_.isBoolean(a.survey.lubesAvailable)?a.survey.lubesAvailable:!1,gigi:_.isBoolean(a.survey.gigi)?a.survey.gigi:!1};k.editHotspotSurvey(a.surveyId,a.hotspotSurveyId,d).success(function(d){a.cancel()}).error(function(a,d){401==d?g.redirectHome():(console.error("ERROR: ",a),alert("An error occurred!"))})}}])})(angular);
(function(g){g.module("Hotspots",["Hotspots.gateway","Hotspots.list","Hotspots.create","Hotspots.edit"]).config(["$stateProvider",function(a){a.state("hotspotsList",{url:"/surveys/:id/hotspots/list",templateUrl:"/surveys/hotspots/list.html",controller:"ListController"}).state("hotspotsCreate",{url:"/surveys/:id/hotspots/create",templateUrl:"/surveys/hotspots/create_form.html",controller:"CreateController"}).state("hotspotsEdit",{url:"/surveys/:survey_id/hotspots/:hotspot_survey_id/edit",templateUrl:"/surveys/hotspots/edit.html",
controller:"HotspotSurveyEditController"})}])})(angular);
(function(g){g.module("TraditionalOutletSurvey.gatewayService",[]).factory("TraditionalOutletGatewayService",["$http",function(a){return{fetchTraditionalOutlets:function(){return a.get("/api/locations/byType/traditional")},createTraditonalOutlet:function(d,e){return a.post("/api/surveys/"+e+"/traditional_outlets",d)},fetchTraditionalOutletsSurvey:function(d){return a.get("/api/surveys/"+d+"/traditional_outlets")},fetchSurvey:function(d,e){return a.get("/api/surveys/"+d+"/traditional_outlets/"+e)},
updateSurvey:function(d,e,g){return a.put("/api/surveys/"+e+"/traditional_outlets/"+g,d)}}}])})(angular);(function(g){g.module("TraditionalOutletSurvey.list",[]).controller("TraditionalOutletSurveyListController",["$scope","$state","$stateParams","urlUtils","TraditionalOutletGatewayService",function(a,d,e,g,k){a.id=e.id;k.fetchTraditionalOutletsSurvey(e.id).success(function(d){a.surveys=d}).error(function(a,d){console.error("ERROR: ",a);401==d&&g.redirectHome()})}])})(angular);
(function(g){g.module("TraditionalOutletSurvey.create",[]).controller("TraditionalOutletSurveyCreateController",["$scope","$state","$stateParams","urlUtils","TraditionalOutletGatewayService",function(a,d,e,g,k){k.fetchTraditionalOutlets().success(function(d){console.log("Got traditional outlets: ",d);a.locations=d;0==d.length&&(a.noLocations=!0,console.log("No Locations: ",a.noLocations))}).error(function(a,d){console.error("ERROR: ",a);401==d&&g.redirectHome()});a.submit=function(){var f={condomsAvailable:_.isBoolean(a.condoms_available)?
a.condoms_available:!1,lubesAvailable:_.isBoolean(a.lube_available)?a.lube_available:!1,gigi:_.isBoolean(a.gigi)?a.gigi:!1,location:{id:a.location.id,name:a.location.name,district:a.location.district,loc:a.location.loc}};k.createTraditonalOutlet(f,e.id).success(function(a){d.transitionTo("surveys.listTraditionalOutlets",{id:e.id})}).error(function(a,d){401==d?g.redirectHome():console.error("ERROR: ",a)})};a.cancel=function(){d.transitionTo("surveys.listTraditionalOutlets",{id:e.id})}}])})(angular);
(function(g){g.module("TraditionalOutletSurvey.edit",[]).controller("TraditionalOutletSurveyEditController",["$scope","$state","$stateParams","urlUtils","TraditionalOutletGatewayService",function(a,d,e,g,k){a.surveyId=e.survey_id;k.fetchSurvey(e.survey_id,e.traditional_outlet_survey_id).success(function(d){a.survey=d}).error(function(a,d){401==d?g.redirectHome():(alert("Could not retrieve survey from server!"),console.log("Error retrieving traditonal outlet from server: ",a))});a.submit=function(){var f=
{condomsAvailable:_.isBoolean(a.survey.condomsAvailable)?a.survey.condomsAvailable:!1,lubesAvailable:_.isBoolean(a.survey.lubesAvailable)?a.survey.lubesAvailable:!1,gigi:_.isBoolean(a.survey.gigi)?a.survey.gigi:!1};k.updateSurvey(f,e.survey_id,e.traditional_outlet_survey_id).success(function(a){d.transitionTo("surveys.listTraditionalOutlets",{id:e.survey_id})}).error(function(a,d){console.error("ERROR: ",a);401==d&&g.redirectHome()})};a.cancel=function(){d.transitionTo("surveys.listTraditionalOutlets",
{id:e.survey_id})}}])})(angular);
(function(g){g.module("TraditionaOutletSurvey",["TraditionalOutletSurvey.gatewayService","TraditionalOutletSurvey.list","TraditionalOutletSurvey.create","TraditionalOutletSurvey.edit"]).config(["$stateProvider",function(a){a.state("surveys.traditionalOutlet",{url:"/:id/traditional_outlet/create",templateUrl:"/surveys/traditional_outlets/create_form.html",controller:"TraditionalOutletSurveyCreateController"}).state("surveys.listTraditionalOutlets",{url:"/:id/traditional_outlet/list",templateUrl:"/surveys/traditional_outlets/list.html",
controller:"TraditionalOutletSurveyListController"}).state("surveys.editTraditionalOutlet",{url:"/surveys/:survey_id/traditional_outlet/:traditional_outlet_survey_id",templateUrl:"/surveys/traditional_outlets/edit.html",controller:"TraditionalOutletSurveyEditController"})}])})(angular);var PasmoApp={apiUrls:{}};
angular.module("PasmoApp","ui.router url_utils surveys PasmoLocation TraditionaOutletSurvey NonTraditionalOutletSurvey Hotspots".split(" ")).run(["$rootScope","$http","$state",function(g,a,d){console.info("Starting Pasmo App......")}]);